import React, { useState } from 'react';
import './toast.css';

interface ToastProps {
  /**
   * Toast Title
   */
  title?: string;
  /**
   * Toast message
   */
  message: string;
  /**
   * Toast type
   */
  type?: 'default' | 'success' | 'error';
  /**
   * Optional callback function to be called when the toast is closed
   */
  onClose?: () => void;
  /**
   * Optional callback function to be called when the button inside the toast is clicked
   */
  onClick?: () => void;
  /**
   * Action button text
   */
  actionButtonText?: string;
  /**
   * Toast UI variant
   */
  variant?: 'action' | 'info';
}

/**
 * Toast component for displaying notifications
 */
export const Toast: React.FC<ToastProps> = ({ message, type = 'default', title, onClick, onClose, actionButtonText = 'Take action', variant = 'info' }) => {
  const [showToast, setShowToast] = useState(true);

  // useEffect(() => {
  //   const timeout = setTimeout(() => {
  //     setShowToast(false);
  //     if (onClose) onClose();
  //   }, duration);

  //   return () => clearTimeout(timeout);
  // }, [duration, onClose]);

  const handleClose = () => {
    setShowToast(false);
    if (onClose) onClose();
  };

  return (
    showToast && (
      <div className={['storybook-toast', `storybook-toast--${type || 'default'}`].join(' ')}>
        {type === 'default' ? <div className='storybook-toast-image-wrapper'>
          <img src='/Avatar.png' />
        </div> : <></>}
        <div className='storybook-toast-content'>
          <div className="storybook-toast-header">
            <div className="storybook-toast-title">
              {type === 'success' ? (
                variant === 'info' ? <div className={`storybook-toast-icon-wrapper--${type || 'default'}`}>
                  <svg width="18" height="14" viewBox="0 0 18 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17.1017 0.51493C17.3925 0.781496 17.4122 1.23333 17.1456 1.52413L6.66942 12.9527C6.53777 13.0963 6.35317 13.1799 6.15839 13.1842C5.96362 13.1884 5.77556 13.1129 5.6378 12.9751L0.875896 8.21321C0.596951 7.93426 0.596951 7.482 0.875896 7.20306C1.15484 6.92411 1.6071 6.92411 1.88605 7.20306L6.12044 11.4374L16.0925 0.558808C16.3591 0.268009 16.8109 0.248364 17.1017 0.51493Z" fill="#00AC80" />
                  </svg>

                </div> : <svg width="17" height="17" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M9 0.237701C4.44365 0.237701 0.75 3.93135 0.75 8.4877C0.75 13.0441 4.44365 16.7377 9 16.7377C13.5563 16.7377 17.25 13.0441 17.25 8.4877C17.25 3.93135 13.5563 0.237701 9 0.237701ZM12.4768 5.77838C12.7015 6.00316 12.7015 6.36759 12.4768 6.59237L8.63956 10.4296C8.53161 10.5375 8.38521 10.5982 8.23256 10.5982C8.0799 10.5982 7.9335 10.5375 7.82556 10.4296L6.29068 8.8947C6.0659 8.66992 6.0659 8.30548 6.29068 8.0807C6.51546 7.85593 6.87989 7.85593 7.10467 8.0807L8.23256 9.20859L11.6628 5.77838C11.8875 5.5536 12.252 5.5536 12.4768 5.77838Z" fill="#00AC80" />
                </svg>
              ) : type === 'error' ? (variant === 'info' ? <div className={`storybook-toast-icon-wrapper--${type || 'default'}`}>
                <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M6.51416 14.3068C8.28255 14.5157 10.0694 14.5157 11.8378 14.3068C11.8448 14.3058 11.8517 14.305 11.8587 14.3043C13.3392 14.1283 14.7977 13.8043 16.2123 13.3374C15.0209 11.7556 14.371 9.82242 14.374 7.82814V7.10985C14.374 5.73131 13.8263 4.40917 12.8515 3.43434C11.8767 2.45954 10.5546 1.91189 9.176 1.91189C7.79743 1.91189 6.47529 2.45954 5.50049 3.43434C4.52568 4.40914 3.97804 5.73127 3.97804 7.10985L3.97804 7.8274C3.98075 9.82248 3.33061 11.7558 2.13884 13.3375C3.54701 13.8023 5.00399 14.1267 6.49346 14.3043C6.50035 14.305 6.50726 14.3058 6.51416 14.3068ZM1.02535 14.1101C0.661324 13.9757 0.548226 13.5161 0.808302 13.2281C2.14508 11.7477 2.88388 9.82341 2.88118 7.82814V7.10985C2.88118 5.44036 3.54438 3.83924 4.72489 2.65874C5.90539 1.47823 7.50652 0.815025 9.176 0.815025C10.8455 0.815025 12.4466 1.47823 13.6271 2.65875C14.8076 3.83928 15.4708 5.44041 15.4708 7.10985V7.82895C15.4679 9.82339 16.2064 11.7477 17.5428 13.2281C17.8028 13.5162 17.6897 13.9758 17.3256 14.1101C15.7875 14.6779 14.1945 15.0821 12.5729 15.3165C12.6112 15.6334 12.6051 15.9552 12.5538 16.2725C12.4679 16.8044 12.2576 17.3084 11.94 17.7437C11.6223 18.1789 11.2065 18.533 10.7262 18.777C10.2459 19.0211 9.7147 19.1484 9.176 19.1484C8.6373 19.1484 8.10613 19.0211 7.62579 18.777C7.14552 18.533 6.72965 18.1789 6.41201 17.7437C6.09442 17.3084 5.88412 16.8044 5.79818 16.2725C5.74691 15.9552 5.74077 15.6333 5.77907 15.3164C4.14825 15.0805 2.55698 14.6757 1.02535 14.1101ZM6.86799 15.4481C6.842 15.6634 6.84618 15.882 6.88101 16.0975C6.93939 16.4589 7.08228 16.8014 7.29805 17.0971C7.51385 17.3928 7.79642 17.6334 8.1227 17.7992C8.4491 17.965 8.81001 18.0515 9.176 18.0515C9.54198 18.0515 9.90289 17.965 10.2293 17.7992C10.5556 17.6334 10.8381 17.3928 11.0539 17.0971C11.2697 16.8014 11.4126 16.4589 11.471 16.0975C11.5058 15.882 11.51 15.6634 11.484 15.4481C9.949 15.5978 8.40301 15.5978 6.86799 15.4481Z" fill="#FF6464" />
                </svg>

              </div> : <svg width="17" height="17" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M10.5735 1.2786C11.3326 1.58223 11.937 2.21598 12.5548 3.10369C13.171 3.98921 13.8561 5.2126 14.7418 6.79433L14.7734 6.85075C15.6245 8.37043 16.2834 9.54711 16.7016 10.5013C17.1213 11.4593 17.3399 12.2806 17.2151 13.0704C17.0485 14.1246 16.4902 15.077 15.6519 15.7374C15.0237 16.2322 14.2004 16.4428 13.1594 16.5446C12.1226 16.646 10.774 16.646 9.03219 16.646H8.96779C7.22607 16.646 5.87743 16.646 4.84066 16.5446C3.79962 16.4428 2.97628 16.2322 2.34814 15.7374C1.50977 15.077 0.951498 14.1246 0.784927 13.0704C0.660127 12.2806 0.878671 11.4593 1.2985 10.5013C1.71659 9.54711 2.37555 8.37043 3.22656 6.85078L3.25821 6.79427C4.14397 5.21254 4.82903 3.9892 5.44528 3.10369C6.06305 2.21598 6.66742 1.58223 7.42651 1.2786C8.43659 0.87458 9.56339 0.87458 10.5735 1.2786ZM9.55263 6.51431C9.55263 6.2091 9.30519 5.96167 8.99999 5.96167C8.69479 5.96167 8.44735 6.2091 8.44735 6.51431V9.46171C8.44735 9.76691 8.69479 10.0143 8.99999 10.0143C9.30519 10.0143 9.55263 9.76691 9.55263 9.46171V6.51431ZM9.73684 11.6723C9.73684 11.2653 9.40695 10.9354 8.99999 10.9354C8.59303 10.9354 8.26314 11.2653 8.26314 11.6723C8.26314 12.0792 8.59303 12.4091 8.99999 12.4091C9.40695 12.4091 9.73684 12.0792 9.73684 11.6723Z" fill="#FF6464" />
              </svg>)
                : <></>}
              {title}
            </div>
            <button className="storybook-close-button" onClick={handleClose}>
              {type === 'success' ? <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M0.933058 0.42076C1.17714 0.176682 1.57286 0.176682 1.81694 0.42076L6.375 4.97882L10.9331 0.42076C11.1771 0.176682 11.5729 0.176682 11.8169 0.42076C12.061 0.664837 12.061 1.06057 11.8169 1.30464L7.25888 5.8627L11.8169 10.4208C12.061 10.6648 12.061 11.0606 11.8169 11.3046C11.5729 11.5487 11.1771 11.5487 10.9331 11.3046L6.375 6.74658L1.81694 11.3046C1.57286 11.5487 1.17714 11.5487 0.933058 11.3046C0.688981 11.0606 0.688981 10.6648 0.933058 10.4208L5.49112 5.8627L0.933058 1.30464C0.688981 1.06057 0.688981 0.664837 0.933058 0.42076Z" fill="#00AC80" />
              </svg>
                :
                type === 'error' ? <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M0.933058 0.408644C1.17714 0.164567 1.57286 0.164567 1.81694 0.408644L6.375 4.9667L10.9331 0.408644C11.1771 0.164567 11.5729 0.164567 11.8169 0.408644C12.061 0.652722 12.061 1.04845 11.8169 1.29253L7.25888 5.85059L11.8169 10.4086C12.061 10.6527 12.061 11.0485 11.8169 11.2925C11.5729 11.5366 11.1771 11.5366 10.9331 11.2925L6.375 6.73447L1.81694 11.2925C1.57286 11.5366 1.17714 11.5366 0.933058 11.2925C0.688981 11.0485 0.688981 10.6527 0.933058 10.4086L5.49112 5.85059L0.933058 1.29253C0.688981 1.04845 0.688981 0.652722 0.933058 0.408644Z" fill="#FF6464" />
                </svg> : <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M0.370062 0.370055C0.64126 0.0988571 1.08096 0.0988571 1.35215 0.370055L6.41666 5.43456L11.4812 0.370055C11.7524 0.0988571 12.1921 0.0988571 12.4633 0.370055C12.7345 0.641252 12.7345 1.08095 12.4633 1.35215L7.39876 6.41666L12.4633 11.4812C12.7345 11.7524 12.7345 12.1921 12.4633 12.4633C12.1921 12.7345 11.7524 12.7345 11.4812 12.4633L6.41666 7.39875L1.35215 12.4633C1.08096 12.7345 0.64126 12.7345 0.370062 12.4633C0.0988648 12.1921 0.0988648 11.7524 0.370062 11.4812L5.43457 6.41666L0.370062 1.35215C0.0988648 1.08095 0.0988648 0.641252 0.370062 0.370055Z" fill="#9CA3AF" />
                </svg>
              }

            </button>
          </div>
          {(variant === 'action' || type == 'default') && <div className='storybook-toast-message'>{message}</div>}
          {variant === 'action' && <button className={['storybook-action-button', `storybook-action-button--${type || 'default'}`].join(' ')} onClick={onClick}>
            {actionButtonText}
          </button>}
        </div>
      </div>
    )
  );
};
